{"ast":null,"code":"import { __assign, __extends } from \"tslib\";\nimport * as React from 'react';\nimport { buttonProperties, getNativeProps, memoizeFunction, getId, mergeAriaAttributeValues } from '../../../Utilities';\nimport { ContextualMenuItemWrapper } from './ContextualMenuItemWrapper';\nimport { KeytipData } from '../../../KeytipData';\nimport { getIsChecked, isItemDisabled, hasSubmenu, getMenuItemAriaRole } from '../../../utilities/contextualMenu/index';\nimport { ContextualMenuItem } from '../ContextualMenuItem';\n\nvar ContextualMenuButton =\n/** @class */\nfunction (_super) {\n  __extends(ContextualMenuButton, _super);\n\n  function ContextualMenuButton() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this._btn = React.createRef();\n    _this._getMemoizedMenuButtonKeytipProps = memoizeFunction(function (keytipProps) {\n      return __assign(__assign({}, keytipProps), {\n        hasMenu: true\n      });\n    });\n\n    _this._renderAriaDescription = function (ariaDescription, className) {\n      // If ariaDescription is given, descriptionId will be assigned to ariaDescriptionSpan\n      return ariaDescription ? React.createElement(\"span\", {\n        id: _this._ariaDescriptionId,\n        className: className\n      }, ariaDescription) : null;\n    };\n\n    _this._getSubmenuTarget = function () {\n      return _this._btn.current ? _this._btn.current : undefined;\n    };\n\n    return _this;\n  }\n\n  ContextualMenuButton.prototype.render = function () {\n    var _this = this;\n\n    var _a = this.props,\n        item = _a.item,\n        classNames = _a.classNames,\n        index = _a.index,\n        focusableElementIndex = _a.focusableElementIndex,\n        totalItemCount = _a.totalItemCount,\n        hasCheckmarks = _a.hasCheckmarks,\n        hasIcons = _a.hasIcons,\n        _b = _a.contextualMenuItemAs,\n        ChildrenRenderer = _b === void 0 ? ContextualMenuItem : _b,\n        expandedMenuItemKey = _a.expandedMenuItemKey,\n        onItemMouseDown = _a.onItemMouseDown,\n        onItemClick = _a.onItemClick,\n        openSubMenu = _a.openSubMenu,\n        dismissSubMenu = _a.dismissSubMenu,\n        dismissMenu = _a.dismissMenu;\n    var isChecked = getIsChecked(item);\n    var canCheck = isChecked !== null;\n    var defaultRole = getMenuItemAriaRole(item);\n    var itemHasSubmenu = hasSubmenu(item);\n    var itemProps = item.itemProps,\n        ariaLabel = item.ariaLabel,\n        ariaDescription = item.ariaDescription;\n    var buttonNativeProperties = getNativeProps(item, buttonProperties); // Do not add the disabled attribute to the button so that it is focusable\n\n    delete buttonNativeProperties.disabled;\n    var itemRole = item.role || defaultRole; // Check for ariaDescription to set the _ariaDescriptionId and render a hidden span with\n    // the description in it to be added to ariaDescribedBy\n\n    if (ariaDescription) {\n      this._ariaDescriptionId = getId();\n    }\n\n    var ariaDescribedByIds = mergeAriaAttributeValues(item.ariaDescribedBy, ariaDescription ? this._ariaDescriptionId : undefined, buttonNativeProperties['aria-describedby']);\n    var itemButtonProperties = {\n      className: classNames.root,\n      onClick: this._onItemClick,\n      onKeyDown: itemHasSubmenu ? this._onItemKeyDown : undefined,\n      onMouseEnter: this._onItemMouseEnter,\n      onMouseLeave: this._onItemMouseLeave,\n      onMouseDown: function (ev) {\n        return onItemMouseDown ? onItemMouseDown(item, ev) : undefined;\n      },\n      onMouseMove: this._onItemMouseMove,\n      href: item.href,\n      title: item.title,\n      'aria-label': ariaLabel,\n      'aria-describedby': ariaDescribedByIds,\n      'aria-haspopup': itemHasSubmenu || undefined,\n      'aria-expanded': itemHasSubmenu ? item.key === expandedMenuItemKey : undefined,\n      'aria-posinset': focusableElementIndex + 1,\n      'aria-setsize': totalItemCount,\n      'aria-disabled': isItemDisabled(item),\n      'aria-checked': (itemRole === 'menuitemcheckbox' || itemRole === 'menuitemradio') && canCheck ? !!isChecked : undefined,\n      'aria-selected': itemRole === 'menuitem' && canCheck ? !!isChecked : undefined,\n      role: itemRole,\n      // eslint-disable-next-line deprecation/deprecation\n      style: item.style\n    };\n    var keytipProps = item.keytipProps;\n\n    if (keytipProps && itemHasSubmenu) {\n      keytipProps = this._getMemoizedMenuButtonKeytipProps(keytipProps);\n    }\n\n    return React.createElement(KeytipData, {\n      keytipProps: keytipProps,\n      ariaDescribedBy: ariaDescribedByIds,\n      disabled: isItemDisabled(item)\n    }, function (keytipAttributes) {\n      return React.createElement(\"button\", __assign({\n        ref: _this._btn\n      }, buttonNativeProperties, itemButtonProperties, keytipAttributes), React.createElement(ChildrenRenderer, __assign({\n        componentRef: item.componentRef,\n        item: item,\n        classNames: classNames,\n        index: index,\n        onCheckmarkClick: hasCheckmarks && onItemClick ? onItemClick : undefined,\n        hasIcons: hasIcons,\n        openSubMenu: openSubMenu,\n        dismissSubMenu: dismissSubMenu,\n        dismissMenu: dismissMenu,\n        getSubmenuTarget: _this._getSubmenuTarget\n      }, itemProps)), _this._renderAriaDescription(ariaDescription, classNames.screenReaderText));\n    });\n  };\n\n  return ContextualMenuButton;\n}(ContextualMenuItemWrapper);\n\nexport { ContextualMenuButton };","map":{"version":3,"sources":["components/ContextualMenu/ContextualMenuItemWrapper/ContextualMenuButton.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport { buttonProperties, getNativeProps, memoizeFunction, getId, mergeAriaAttributeValues } from '../../../Utilities';\nimport { ContextualMenuItemWrapper } from './ContextualMenuItemWrapper';\nimport { KeytipData } from '../../../KeytipData';\nimport { getIsChecked, isItemDisabled, hasSubmenu, getMenuItemAriaRole } from '../../../utilities/contextualMenu/index';\nimport { ContextualMenuItem } from '../ContextualMenuItem';\nimport type { IKeytipDataProps } from '../../../KeytipData';\nimport type { IKeytipProps } from '../../../Keytip';\n\nexport class ContextualMenuButton extends ContextualMenuItemWrapper {\n  private _btn = React.createRef<HTMLButtonElement>();\n  private _ariaDescriptionId: string;\n\n  private _getMemoizedMenuButtonKeytipProps = memoizeFunction((keytipProps: IKeytipProps) => {\n    return {\n      ...keytipProps,\n      hasMenu: true,\n    };\n  });\n\n  public render() {\n    const {\n      item,\n      classNames,\n      index,\n      focusableElementIndex,\n      totalItemCount,\n      hasCheckmarks,\n      hasIcons,\n      contextualMenuItemAs: ChildrenRenderer = ContextualMenuItem,\n      expandedMenuItemKey,\n      onItemMouseDown,\n      onItemClick,\n      openSubMenu,\n      dismissSubMenu,\n      dismissMenu,\n    } = this.props;\n\n    const isChecked: boolean | null | undefined = getIsChecked(item);\n    const canCheck: boolean = isChecked !== null;\n    const defaultRole = getMenuItemAriaRole(item);\n    const itemHasSubmenu = hasSubmenu(item);\n    const { itemProps, ariaLabel, ariaDescription } = item;\n\n    const buttonNativeProperties = getNativeProps<React.ButtonHTMLAttributes<HTMLButtonElement>>(\n      item,\n      buttonProperties,\n    );\n    // Do not add the disabled attribute to the button so that it is focusable\n    delete buttonNativeProperties.disabled;\n\n    const itemRole = item.role || defaultRole;\n\n    // Check for ariaDescription to set the _ariaDescriptionId and render a hidden span with\n    // the description in it to be added to ariaDescribedBy\n    if (ariaDescription) {\n      this._ariaDescriptionId = getId();\n    }\n    const ariaDescribedByIds = mergeAriaAttributeValues(\n      item.ariaDescribedBy,\n      ariaDescription ? this._ariaDescriptionId : undefined,\n      buttonNativeProperties['aria-describedby'],\n    );\n\n    const itemButtonProperties = {\n      className: classNames.root,\n      onClick: this._onItemClick,\n      onKeyDown: itemHasSubmenu ? this._onItemKeyDown : undefined,\n      onMouseEnter: this._onItemMouseEnter,\n      onMouseLeave: this._onItemMouseLeave,\n      onMouseDown: (ev: React.MouseEvent<HTMLButtonElement>) =>\n        onItemMouseDown ? onItemMouseDown(item, ev) : undefined,\n      onMouseMove: this._onItemMouseMove,\n      href: item.href,\n      title: item.title,\n      'aria-label': ariaLabel,\n      'aria-describedby': ariaDescribedByIds,\n      'aria-haspopup': itemHasSubmenu || undefined,\n      'aria-expanded': itemHasSubmenu ? item.key === expandedMenuItemKey : undefined,\n      'aria-posinset': focusableElementIndex + 1,\n      'aria-setsize': totalItemCount,\n      'aria-disabled': isItemDisabled(item),\n      'aria-checked':\n        (itemRole === 'menuitemcheckbox' || itemRole === 'menuitemradio') && canCheck ? !!isChecked : undefined,\n      'aria-selected': itemRole === 'menuitem' && canCheck ? !!isChecked : undefined,\n      role: itemRole,\n      // eslint-disable-next-line deprecation/deprecation\n      style: item.style,\n    };\n\n    let { keytipProps } = item;\n    if (keytipProps && itemHasSubmenu) {\n      keytipProps = this._getMemoizedMenuButtonKeytipProps(keytipProps);\n    }\n\n    return (\n      <KeytipData keytipProps={keytipProps} ariaDescribedBy={ariaDescribedByIds} disabled={isItemDisabled(item)}>\n        {(keytipAttributes: IKeytipDataProps): JSX.Element => (\n          <button ref={this._btn} {...buttonNativeProperties} {...itemButtonProperties} {...keytipAttributes}>\n            <ChildrenRenderer\n              componentRef={item.componentRef}\n              item={item}\n              classNames={classNames}\n              index={index}\n              onCheckmarkClick={hasCheckmarks && onItemClick ? onItemClick : undefined}\n              hasIcons={hasIcons}\n              openSubMenu={openSubMenu}\n              dismissSubMenu={dismissSubMenu}\n              dismissMenu={dismissMenu}\n              getSubmenuTarget={this._getSubmenuTarget}\n              {...itemProps}\n            />\n            {this._renderAriaDescription(ariaDescription, classNames.screenReaderText)}\n          </button>\n        )}\n      </KeytipData>\n    );\n  }\n\n  protected _renderAriaDescription = (ariaDescription?: string, className?: string) => {\n    // If ariaDescription is given, descriptionId will be assigned to ariaDescriptionSpan\n    return ariaDescription ? (\n      <span id={this._ariaDescriptionId} className={className}>\n        {ariaDescription}\n      </span>\n    ) : null;\n  };\n\n  protected _getSubmenuTarget = (): HTMLElement | undefined => {\n    return this._btn.current ? this._btn.current : undefined;\n  };\n}\n"],"sourceRoot":"../src/"},"metadata":{},"sourceType":"module"}