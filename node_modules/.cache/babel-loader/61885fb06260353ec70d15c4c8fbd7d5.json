{"ast":null,"code":"import { __assign } from \"tslib\";\nimport * as React from 'react';\nimport { DayOfWeek, FirstWeekOfYear, DateRangeType, addMonths, addYears, DEFAULT_CALENDAR_STRINGS, DEFAULT_DATE_FORMATTING } from '@fluentui/date-time-utilities';\nimport { CalendarDay } from './CalendarDay/CalendarDay';\nimport { CalendarMonth } from './CalendarMonth/CalendarMonth';\nimport { css, KeyCodes, classNamesFunction, focusAsync, format, FocusRects, getPropsWithDefaults, getWindow } from '@fluentui/utilities';\nimport { useControllableValue } from '@fluentui/react-hooks';\nimport { defaultCalendarNavigationIcons } from './defaults';\nvar MIN_SIZE_FORCE_OVERLAY = 440;\nvar getClassNames = classNamesFunction();\nvar defaultWorkWeekDays = [DayOfWeek.Monday, DayOfWeek.Tuesday, DayOfWeek.Wednesday, DayOfWeek.Thursday, DayOfWeek.Friday];\nvar DEFAULT_PROPS = {\n  isMonthPickerVisible: true,\n  isDayPickerVisible: true,\n  showMonthPickerAsOverlay: false,\n  today: new Date(),\n  firstDayOfWeek: DayOfWeek.Sunday,\n  dateRangeType: DateRangeType.Day,\n  showGoToToday: true,\n  strings: DEFAULT_CALENDAR_STRINGS,\n  highlightCurrentMonth: false,\n  highlightSelectedMonth: false,\n  navigationIcons: defaultCalendarNavigationIcons,\n  showWeekNumbers: false,\n  firstWeekOfYear: FirstWeekOfYear.FirstDay,\n  dateTimeFormatter: DEFAULT_DATE_FORMATTING,\n  showSixWeeksByDefault: false,\n  workWeekDays: defaultWorkWeekDays,\n  showCloseButton: false,\n  allFocusable: false\n};\n\nfunction useDateState(_a) {\n  var value = _a.value,\n      _b = _a.today,\n      today = _b === void 0 ? new Date() : _b,\n      onSelectDate = _a.onSelectDate;\n  /** The currently selected date in the calendar */\n\n  var _c = useControllableValue(value, today),\n      _d = _c[0],\n      selectedDate = _d === void 0 ? today : _d,\n      setSelectedDate = _c[1];\n  /** The currently focused date in the day picker, but not necessarily selected */\n\n\n  var _e = React.useState(value),\n      _f = _e[0],\n      navigatedDay = _f === void 0 ? today : _f,\n      setNavigatedDay = _e[1];\n  /** The currently focused date in the month picker, but not necessarily selected */\n\n\n  var _g = React.useState(value),\n      _h = _g[0],\n      navigatedMonth = _h === void 0 ? today : _h,\n      setNavigatedMonth = _g[1];\n  /** If using a controlled value, when that value changes, navigate to that date */\n\n\n  var _j = React.useState(value),\n      _k = _j[0],\n      lastSelectedDate = _k === void 0 ? today : _k,\n      setLastSelectedDate = _j[1];\n\n  if (value && lastSelectedDate.valueOf() !== value.valueOf()) {\n    setNavigatedDay(value);\n    setNavigatedMonth(value);\n    setLastSelectedDate(value);\n  }\n\n  var navigateMonth = function (date) {\n    setNavigatedMonth(date);\n  };\n\n  var navigateDay = function (date) {\n    setNavigatedMonth(date);\n    setNavigatedDay(date);\n  };\n\n  var onDateSelected = function (date, selectedDateRangeArray) {\n    setNavigatedMonth(date);\n    setNavigatedDay(date);\n    setSelectedDate(date);\n    onSelectDate === null || onSelectDate === void 0 ? void 0 : onSelectDate(date, selectedDateRangeArray);\n  };\n\n  return [selectedDate, navigatedDay, navigatedMonth, onDateSelected, navigateDay, navigateMonth];\n}\n\nfunction useVisibilityState(props) {\n  /** State used to show/hide month picker */\n  var _a = useControllableValue(getShowMonthPickerAsOverlay(props) ? undefined : props.isMonthPickerVisible, false),\n      _b = _a[0],\n      isMonthPickerVisible = _b === void 0 ? true : _b,\n      setIsMonthPickerVisible = _a[1];\n  /** State used to show/hide day picker */\n\n\n  var _c = useControllableValue(getShowMonthPickerAsOverlay(props) ? undefined : props.isDayPickerVisible, true),\n      _d = _c[0],\n      isDayPickerVisible = _d === void 0 ? true : _d,\n      setIsDayPickerVisible = _c[1];\n\n  var toggleDayMonthPickerVisibility = function () {\n    setIsMonthPickerVisible(!isMonthPickerVisible);\n    setIsDayPickerVisible(!isDayPickerVisible);\n  };\n\n  return [isMonthPickerVisible, isDayPickerVisible, toggleDayMonthPickerVisibility];\n}\n\nfunction useFocusLogic(_a, isDayPickerVisible, isMonthPickerVisible) {\n  var componentRef = _a.componentRef;\n  var dayPicker = React.useRef(null);\n  var monthPicker = React.useRef(null);\n  var focusOnUpdate = React.useRef(false);\n  var focus = React.useCallback(function () {\n    if (isDayPickerVisible && dayPicker.current) {\n      focusAsync(dayPicker.current);\n    } else if (isMonthPickerVisible && monthPicker.current) {\n      focusAsync(monthPicker.current);\n    }\n  }, [isDayPickerVisible, isMonthPickerVisible]);\n  React.useImperativeHandle(componentRef, function () {\n    return {\n      focus: focus\n    };\n  }, [focus]);\n  React.useEffect(function () {\n    if (focusOnUpdate.current) {\n      focus();\n      focusOnUpdate.current = false;\n    }\n  });\n\n  var focusOnNextUpdate = function () {\n    focusOnUpdate.current = true;\n  };\n\n  return [dayPicker, monthPicker, focusOnNextUpdate];\n}\n\nexport var CalendarBase = React.forwardRef(function (propsWithoutDefaults, forwardedRef) {\n  var props = getPropsWithDefaults(DEFAULT_PROPS, propsWithoutDefaults);\n\n  var _a = useDateState(props),\n      selectedDate = _a[0],\n      navigatedDay = _a[1],\n      navigatedMonth = _a[2],\n      onDateSelected = _a[3],\n      navigateDay = _a[4],\n      navigateMonth = _a[5];\n\n  var _b = useVisibilityState(props),\n      isMonthPickerVisible = _b[0],\n      isDayPickerVisible = _b[1],\n      toggleDayMonthPickerVisibility = _b[2];\n\n  var _c = useFocusLogic(props, isDayPickerVisible, isMonthPickerVisible),\n      dayPicker = _c[0],\n      monthPicker = _c[1],\n      focusOnNextUpdate = _c[2];\n\n  var renderGoToTodayButton = function () {\n    var goTodayEnabled = showGoToToday;\n\n    if (goTodayEnabled && today) {\n      goTodayEnabled = navigatedDay.getFullYear() !== today.getFullYear() || navigatedDay.getMonth() !== today.getMonth() || navigatedMonth.getFullYear() !== today.getFullYear() || navigatedMonth.getMonth() !== today.getMonth();\n    }\n\n    return showGoToToday && React.createElement(\"button\", {\n      className: css('js-goToday', classes.goTodayButton),\n      onClick: onGotoToday,\n      onKeyDown: onButtonKeyDown(onGotoToday),\n      type: \"button\",\n      disabled: !goTodayEnabled\n    }, strings.goToToday);\n  };\n\n  var onNavigateDayDate = function (date, focusOnNavigatedDay) {\n    navigateDay(date);\n\n    if (focusOnNavigatedDay) {\n      focusOnNextUpdate();\n    }\n  };\n\n  var onNavigateMonthDate = function (date, focusOnNavigatedDay) {\n    if (focusOnNavigatedDay) {\n      focusOnNextUpdate();\n    }\n\n    if (!focusOnNavigatedDay) {\n      navigateMonth(date);\n      return;\n    }\n\n    if (monthPickerOnly) {\n      onDateSelected(date);\n    }\n\n    navigateDay(date);\n  };\n\n  var onHeaderSelect = getShowMonthPickerAsOverlay(props) ? function () {\n    toggleDayMonthPickerVisibility();\n    focusOnNextUpdate();\n  } : undefined;\n\n  var onGotoToday = function () {\n    navigateDay(today);\n    focusOnNextUpdate();\n  };\n\n  var onButtonKeyDown = function (callback) {\n    return function (ev) {\n      // eslint-disable-next-line deprecation/deprecation\n      switch (ev.which) {\n        case KeyCodes.enter:\n        case KeyCodes.space:\n          callback();\n          break;\n      }\n    };\n  };\n\n  var onDatePickerPopupKeyDown = function (ev) {\n    var _a; // eslint-disable-next-line deprecation/deprecation\n\n\n    switch (ev.which) {\n      case KeyCodes.enter:\n        ev.preventDefault();\n        break;\n\n      case KeyCodes.backspace:\n        ev.preventDefault();\n        break;\n\n      case KeyCodes.escape:\n        (_a = props.onDismiss) === null || _a === void 0 ? void 0 : _a.call(props);\n        break;\n\n      case KeyCodes.pageUp:\n        if (ev.ctrlKey) {\n          // go to next year\n          navigateDay(addYears(navigatedDay, 1));\n        } else {\n          // go to next month\n          navigateDay(addMonths(navigatedDay, 1));\n        }\n\n        ev.preventDefault();\n        break;\n\n      case KeyCodes.pageDown:\n        if (ev.ctrlKey) {\n          // go to previous year\n          navigateDay(addYears(navigatedDay, -1));\n        } else {\n          // go to previous month\n          navigateDay(addMonths(navigatedDay, -1));\n        }\n\n        ev.preventDefault();\n        break;\n\n      default:\n        break;\n    }\n  };\n\n  var rootClass = 'ms-DatePicker';\n  var firstDayOfWeek = props.firstDayOfWeek,\n      dateRangeType = props.dateRangeType,\n      strings = props.strings,\n      showGoToToday = props.showGoToToday,\n      highlightCurrentMonth = props.highlightCurrentMonth,\n      highlightSelectedMonth = props.highlightSelectedMonth,\n      navigationIcons = props.navigationIcons,\n      minDate = props.minDate,\n      maxDate = props.maxDate,\n      restrictedDates = props.restrictedDates,\n      className = props.className,\n      showCloseButton = props.showCloseButton,\n      allFocusable = props.allFocusable,\n      styles = props.styles,\n      showWeekNumbers = props.showWeekNumbers,\n      theme = props.theme,\n      calendarDayProps = props.calendarDayProps,\n      calendarMonthProps = props.calendarMonthProps,\n      dateTimeFormatter = props.dateTimeFormatter,\n      _d = props.today,\n      today = _d === void 0 ? new Date() : _d;\n  var showMonthPickerAsOverlay = getShowMonthPickerAsOverlay(props);\n  var monthPickerOnly = !showMonthPickerAsOverlay && !isDayPickerVisible;\n  var overlaidWithButton = showMonthPickerAsOverlay && showGoToToday;\n  var classes = getClassNames(styles, {\n    theme: theme,\n    className: className,\n    isMonthPickerVisible: isMonthPickerVisible,\n    isDayPickerVisible: isDayPickerVisible,\n    monthPickerOnly: monthPickerOnly,\n    showMonthPickerAsOverlay: showMonthPickerAsOverlay,\n    overlaidWithButton: overlaidWithButton,\n    overlayedWithButton: overlaidWithButton,\n    showGoToToday: showGoToToday,\n    showWeekNumbers: showWeekNumbers\n  });\n  var todayDateString = '';\n  var selectedDateString = '';\n\n  if (dateTimeFormatter && strings.todayDateFormatString) {\n    todayDateString = format(strings.todayDateFormatString, dateTimeFormatter.formatMonthDayYear(today, strings));\n  }\n\n  if (dateTimeFormatter && strings.selectedDateFormatString) {\n    selectedDateString = format(strings.selectedDateFormatString, dateTimeFormatter.formatMonthDayYear(selectedDate, strings));\n  }\n\n  var selectionAndTodayString = selectedDateString + ', ' + todayDateString;\n  return React.createElement(\"div\", {\n    ref: forwardedRef,\n    role: \"group\",\n    \"aria-label\": selectionAndTodayString,\n    className: css(rootClass, classes.root, className, 'ms-slideDownIn10'),\n    onKeyDown: onDatePickerPopupKeyDown\n  }, React.createElement(\"div\", {\n    className: classes.liveRegion,\n    \"aria-live\": \"polite\",\n    \"aria-atomic\": \"true\"\n  }, React.createElement(\"span\", null, selectedDateString)), isDayPickerVisible && React.createElement(CalendarDay, __assign({\n    selectedDate: selectedDate,\n    navigatedDate: navigatedDay,\n    today: props.today,\n    onSelectDate: onDateSelected,\n    // eslint-disable-next-line react/jsx-no-bind\n    onNavigateDate: onNavigateDayDate,\n    onDismiss: props.onDismiss,\n    firstDayOfWeek: firstDayOfWeek,\n    dateRangeType: dateRangeType,\n    strings: strings,\n    // eslint-disable-next-line react/jsx-no-bind\n    onHeaderSelect: onHeaderSelect,\n    navigationIcons: navigationIcons,\n    showWeekNumbers: props.showWeekNumbers,\n    firstWeekOfYear: props.firstWeekOfYear,\n    dateTimeFormatter: props.dateTimeFormatter,\n    showSixWeeksByDefault: props.showSixWeeksByDefault,\n    minDate: minDate,\n    maxDate: maxDate,\n    restrictedDates: restrictedDates,\n    workWeekDays: props.workWeekDays,\n    componentRef: dayPicker,\n    showCloseButton: showCloseButton,\n    allFocusable: allFocusable\n  }, calendarDayProps)), isDayPickerVisible && isMonthPickerVisible && React.createElement(\"div\", {\n    className: classes.divider\n  }), isMonthPickerVisible ? React.createElement(\"div\", {\n    className: classes.monthPickerWrapper\n  }, React.createElement(CalendarMonth, __assign({\n    navigatedDate: navigatedMonth,\n    selectedDate: navigatedDay,\n    strings: strings,\n    // eslint-disable-next-line react/jsx-no-bind\n    onNavigateDate: onNavigateMonthDate,\n    today: props.today,\n    highlightCurrentMonth: highlightCurrentMonth,\n    highlightSelectedMonth: highlightSelectedMonth,\n    // eslint-disable-next-line react/jsx-no-bind\n    onHeaderSelect: onHeaderSelect,\n    navigationIcons: navigationIcons,\n    dateTimeFormatter: props.dateTimeFormatter,\n    minDate: minDate,\n    maxDate: maxDate,\n    componentRef: monthPicker\n  }, calendarMonthProps)), renderGoToTodayButton()) : renderGoToTodayButton(), React.createElement(FocusRects, null));\n});\nCalendarBase.displayName = 'CalendarBase';\n\nfunction getShowMonthPickerAsOverlay(_a) {\n  var showMonthPickerAsOverlay = _a.showMonthPickerAsOverlay,\n      isDayPickerVisible = _a.isDayPickerVisible;\n  var win = getWindow();\n  return showMonthPickerAsOverlay || isDayPickerVisible && win && win.innerWidth <= MIN_SIZE_FORCE_OVERLAY;\n}","map":{"version":3,"sources":["components/Calendar/Calendar.base.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport {\n  DayOfWeek,\n  FirstWeekOfYear,\n  DateRangeType,\n  addMonths,\n  addYears,\n  DEFAULT_CALENDAR_STRINGS,\n  DEFAULT_DATE_FORMATTING,\n} from '@fluentui/date-time-utilities';\nimport { CalendarDay } from './CalendarDay/CalendarDay';\nimport { CalendarMonth } from './CalendarMonth/CalendarMonth';\nimport {\n  css,\n  KeyCodes,\n  classNamesFunction,\n  focusAsync,\n  format,\n  FocusRects,\n  getPropsWithDefaults,\n  getWindow,\n} from '@fluentui/utilities';\nimport { useControllableValue } from '@fluentui/react-hooks';\nimport { defaultCalendarNavigationIcons } from './defaults';\nimport type { ICalendarProps, ICalendarStyleProps, ICalendarStyles } from './Calendar.types';\nimport type { ICalendarDay } from './CalendarDay/CalendarDay.types';\nimport type { ICalendarMonth } from './CalendarMonth/CalendarMonth.types';\n\nconst MIN_SIZE_FORCE_OVERLAY = 440;\n\nconst getClassNames = classNamesFunction<ICalendarStyleProps, ICalendarStyles>();\n\nconst defaultWorkWeekDays: DayOfWeek[] = [\n  DayOfWeek.Monday,\n  DayOfWeek.Tuesday,\n  DayOfWeek.Wednesday,\n  DayOfWeek.Thursday,\n  DayOfWeek.Friday,\n];\n\nconst DEFAULT_PROPS: Partial<ICalendarProps> = {\n  isMonthPickerVisible: true,\n  isDayPickerVisible: true,\n  showMonthPickerAsOverlay: false,\n  today: new Date(),\n  firstDayOfWeek: DayOfWeek.Sunday,\n  dateRangeType: DateRangeType.Day,\n  showGoToToday: true,\n  strings: DEFAULT_CALENDAR_STRINGS,\n  highlightCurrentMonth: false,\n  highlightSelectedMonth: false,\n  navigationIcons: defaultCalendarNavigationIcons,\n  showWeekNumbers: false,\n  firstWeekOfYear: FirstWeekOfYear.FirstDay,\n  dateTimeFormatter: DEFAULT_DATE_FORMATTING,\n  showSixWeeksByDefault: false,\n  workWeekDays: defaultWorkWeekDays,\n  showCloseButton: false,\n  allFocusable: false,\n};\n\nfunction useDateState({ value, today = new Date(), onSelectDate }: ICalendarProps) {\n  /** The currently selected date in the calendar */\n  const [selectedDate = today, setSelectedDate] = useControllableValue(value, today);\n\n  /** The currently focused date in the day picker, but not necessarily selected */\n  const [navigatedDay = today, setNavigatedDay] = React.useState(value);\n\n  /** The currently focused date in the month picker, but not necessarily selected */\n  const [navigatedMonth = today, setNavigatedMonth] = React.useState(value);\n\n  /** If using a controlled value, when that value changes, navigate to that date */\n  const [lastSelectedDate = today, setLastSelectedDate] = React.useState(value);\n  if (value && lastSelectedDate.valueOf() !== value.valueOf()) {\n    setNavigatedDay(value);\n    setNavigatedMonth(value);\n    setLastSelectedDate(value);\n  }\n\n  const navigateMonth = (date: Date) => {\n    setNavigatedMonth(date);\n  };\n\n  const navigateDay = (date: Date) => {\n    setNavigatedMonth(date);\n    setNavigatedDay(date);\n  };\n\n  const onDateSelected = (date: Date, selectedDateRangeArray?: Date[]) => {\n    setNavigatedMonth(date);\n    setNavigatedDay(date);\n    setSelectedDate(date);\n    onSelectDate?.(date, selectedDateRangeArray);\n  };\n\n  return [selectedDate, navigatedDay, navigatedMonth, onDateSelected, navigateDay, navigateMonth] as const;\n}\n\nfunction useVisibilityState(props: ICalendarProps) {\n  /** State used to show/hide month picker */\n  const [isMonthPickerVisible = true, setIsMonthPickerVisible] = useControllableValue(\n    getShowMonthPickerAsOverlay(props) ? undefined : props.isMonthPickerVisible,\n    false,\n  );\n  /** State used to show/hide day picker */\n  const [isDayPickerVisible = true, setIsDayPickerVisible] = useControllableValue(\n    getShowMonthPickerAsOverlay(props) ? undefined : props.isDayPickerVisible,\n    true,\n  );\n\n  const toggleDayMonthPickerVisibility = () => {\n    setIsMonthPickerVisible(!isMonthPickerVisible);\n    setIsDayPickerVisible(!isDayPickerVisible);\n  };\n\n  return [isMonthPickerVisible, isDayPickerVisible, toggleDayMonthPickerVisibility] as const;\n}\n\nfunction useFocusLogic({ componentRef }: ICalendarProps, isDayPickerVisible: boolean, isMonthPickerVisible: boolean) {\n  const dayPicker = React.useRef<ICalendarDay>(null);\n  const monthPicker = React.useRef<ICalendarMonth>(null);\n  const focusOnUpdate = React.useRef(false);\n\n  const focus = React.useCallback(() => {\n    if (isDayPickerVisible && dayPicker.current) {\n      focusAsync(dayPicker.current);\n    } else if (isMonthPickerVisible && monthPicker.current) {\n      focusAsync(monthPicker.current);\n    }\n  }, [isDayPickerVisible, isMonthPickerVisible]);\n\n  React.useImperativeHandle(componentRef, () => ({ focus }), [focus]);\n\n  React.useEffect(() => {\n    if (focusOnUpdate.current) {\n      focus();\n      focusOnUpdate.current = false;\n    }\n  });\n\n  const focusOnNextUpdate = () => {\n    focusOnUpdate.current = true;\n  };\n\n  return [dayPicker, monthPicker, focusOnNextUpdate] as const;\n}\n\nexport const CalendarBase: React.FunctionComponent<ICalendarProps> = React.forwardRef<HTMLDivElement, ICalendarProps>(\n  (propsWithoutDefaults, forwardedRef) => {\n    const props = getPropsWithDefaults(DEFAULT_PROPS, propsWithoutDefaults);\n\n    const [selectedDate, navigatedDay, navigatedMonth, onDateSelected, navigateDay, navigateMonth] = useDateState(\n      props,\n    );\n    const [isMonthPickerVisible, isDayPickerVisible, toggleDayMonthPickerVisibility] = useVisibilityState(props);\n    const [dayPicker, monthPicker, focusOnNextUpdate] = useFocusLogic(props, isDayPickerVisible, isMonthPickerVisible);\n\n    const renderGoToTodayButton = () => {\n      let goTodayEnabled = showGoToToday;\n\n      if (goTodayEnabled && today) {\n        goTodayEnabled =\n          navigatedDay.getFullYear() !== today.getFullYear() ||\n          navigatedDay.getMonth() !== today.getMonth() ||\n          navigatedMonth.getFullYear() !== today.getFullYear() ||\n          navigatedMonth.getMonth() !== today.getMonth();\n      }\n\n      return (\n        showGoToToday && (\n          <button\n            className={css('js-goToday', classes.goTodayButton)}\n            onClick={onGotoToday}\n            onKeyDown={onButtonKeyDown(onGotoToday)}\n            type=\"button\"\n            disabled={!goTodayEnabled}\n          >\n            {strings!.goToToday}\n          </button>\n        )\n      );\n    };\n\n    const onNavigateDayDate = (date: Date, focusOnNavigatedDay: boolean): void => {\n      navigateDay(date);\n      if (focusOnNavigatedDay) {\n        focusOnNextUpdate();\n      }\n    };\n\n    const onNavigateMonthDate = (date: Date, focusOnNavigatedDay: boolean): void => {\n      if (focusOnNavigatedDay) {\n        focusOnNextUpdate();\n      }\n\n      if (!focusOnNavigatedDay) {\n        navigateMonth(date);\n        return;\n      }\n\n      if (monthPickerOnly) {\n        onDateSelected(date);\n      }\n\n      navigateDay(date);\n    };\n\n    const onHeaderSelect = getShowMonthPickerAsOverlay(props)\n      ? (): void => {\n          toggleDayMonthPickerVisibility();\n\n          focusOnNextUpdate();\n        }\n      : undefined;\n\n    const onGotoToday = (): void => {\n      navigateDay(today!);\n      focusOnNextUpdate();\n    };\n\n    const onButtonKeyDown = (callback: () => void): ((ev: React.KeyboardEvent<HTMLButtonElement>) => void) => {\n      return (ev: React.KeyboardEvent<HTMLButtonElement>) => {\n        // eslint-disable-next-line deprecation/deprecation\n        switch (ev.which) {\n          case KeyCodes.enter:\n          case KeyCodes.space:\n            callback();\n            break;\n        }\n      };\n    };\n\n    const onDatePickerPopupKeyDown = (ev: React.KeyboardEvent<HTMLElement>): void => {\n      // eslint-disable-next-line deprecation/deprecation\n      switch (ev.which) {\n        case KeyCodes.enter:\n          ev.preventDefault();\n          break;\n\n        case KeyCodes.backspace:\n          ev.preventDefault();\n          break;\n\n        case KeyCodes.escape:\n          props.onDismiss?.();\n          break;\n\n        case KeyCodes.pageUp:\n          if (ev.ctrlKey) {\n            // go to next year\n            navigateDay(addYears(navigatedDay, 1));\n          } else {\n            // go to next month\n            navigateDay(addMonths(navigatedDay, 1));\n          }\n          ev.preventDefault();\n          break;\n        case KeyCodes.pageDown:\n          if (ev.ctrlKey) {\n            // go to previous year\n            navigateDay(addYears(navigatedDay, -1));\n          } else {\n            // go to previous month\n            navigateDay(addMonths(navigatedDay, -1));\n          }\n          ev.preventDefault();\n          break;\n        default:\n          break;\n      }\n    };\n    const rootClass = 'ms-DatePicker';\n    const {\n      firstDayOfWeek,\n      dateRangeType,\n      strings,\n      showGoToToday,\n      highlightCurrentMonth,\n      highlightSelectedMonth,\n      navigationIcons,\n      minDate,\n      maxDate,\n      restrictedDates,\n      className,\n      showCloseButton,\n      allFocusable,\n      styles,\n      showWeekNumbers,\n      theme,\n      calendarDayProps,\n      calendarMonthProps,\n      dateTimeFormatter,\n      today = new Date(),\n    } = props;\n\n    const showMonthPickerAsOverlay = getShowMonthPickerAsOverlay(props);\n\n    const monthPickerOnly = !showMonthPickerAsOverlay && !isDayPickerVisible;\n    const overlaidWithButton = showMonthPickerAsOverlay && showGoToToday;\n\n    const classes = getClassNames(styles, {\n      theme: theme!,\n      className,\n      isMonthPickerVisible: isMonthPickerVisible,\n      isDayPickerVisible: isDayPickerVisible,\n      monthPickerOnly: monthPickerOnly,\n      showMonthPickerAsOverlay: showMonthPickerAsOverlay,\n      overlaidWithButton: overlaidWithButton,\n      overlayedWithButton: overlaidWithButton,\n      showGoToToday: showGoToToday,\n      showWeekNumbers: showWeekNumbers,\n    });\n\n    let todayDateString: string = '';\n    let selectedDateString: string = '';\n    if (dateTimeFormatter && strings!.todayDateFormatString) {\n      todayDateString = format(strings!.todayDateFormatString, dateTimeFormatter.formatMonthDayYear(today, strings!));\n    }\n    if (dateTimeFormatter && strings!.selectedDateFormatString) {\n      selectedDateString = format(\n        strings!.selectedDateFormatString,\n        dateTimeFormatter.formatMonthDayYear(selectedDate, strings!),\n      );\n    }\n    const selectionAndTodayString = selectedDateString + ', ' + todayDateString;\n\n    return (\n      <div\n        ref={forwardedRef}\n        role=\"group\"\n        aria-label={selectionAndTodayString}\n        className={css(rootClass, classes.root, className, 'ms-slideDownIn10')}\n        onKeyDown={onDatePickerPopupKeyDown}\n      >\n        <div className={classes.liveRegion} aria-live=\"polite\" aria-atomic=\"true\">\n          <span>{selectedDateString}</span>\n        </div>\n        {isDayPickerVisible && (\n          <CalendarDay\n            selectedDate={selectedDate!}\n            navigatedDate={navigatedDay!}\n            today={props.today}\n            onSelectDate={onDateSelected}\n            // eslint-disable-next-line react/jsx-no-bind\n            onNavigateDate={onNavigateDayDate}\n            onDismiss={props.onDismiss}\n            firstDayOfWeek={firstDayOfWeek!}\n            dateRangeType={dateRangeType!}\n            strings={strings!}\n            // eslint-disable-next-line react/jsx-no-bind\n            onHeaderSelect={onHeaderSelect}\n            navigationIcons={navigationIcons!}\n            showWeekNumbers={props.showWeekNumbers}\n            firstWeekOfYear={props.firstWeekOfYear!}\n            dateTimeFormatter={props.dateTimeFormatter!}\n            showSixWeeksByDefault={props.showSixWeeksByDefault}\n            minDate={minDate}\n            maxDate={maxDate}\n            restrictedDates={restrictedDates}\n            workWeekDays={props.workWeekDays}\n            componentRef={dayPicker}\n            showCloseButton={showCloseButton}\n            allFocusable={allFocusable}\n            {...calendarDayProps} // at end of list so consumer's custom functions take precedence\n          />\n        )}\n        {isDayPickerVisible && isMonthPickerVisible && <div className={classes.divider} />}\n        {isMonthPickerVisible ? (\n          <div className={classes.monthPickerWrapper}>\n            <CalendarMonth\n              navigatedDate={navigatedMonth}\n              selectedDate={navigatedDay}\n              strings={strings!}\n              // eslint-disable-next-line react/jsx-no-bind\n              onNavigateDate={onNavigateMonthDate}\n              today={props.today}\n              highlightCurrentMonth={highlightCurrentMonth!}\n              highlightSelectedMonth={highlightSelectedMonth!}\n              // eslint-disable-next-line react/jsx-no-bind\n              onHeaderSelect={onHeaderSelect}\n              navigationIcons={navigationIcons!}\n              dateTimeFormatter={props.dateTimeFormatter!}\n              minDate={minDate}\n              maxDate={maxDate}\n              componentRef={monthPicker}\n              {...calendarMonthProps} // at end of list so consumer's custom functions take precedence\n            />\n            {renderGoToTodayButton()}\n          </div>\n        ) : (\n          renderGoToTodayButton()\n        )}\n        <FocusRects />\n      </div>\n    );\n  },\n);\nCalendarBase.displayName = 'CalendarBase';\n\nfunction getShowMonthPickerAsOverlay({ showMonthPickerAsOverlay, isDayPickerVisible }: ICalendarProps) {\n  const win = getWindow();\n  return showMonthPickerAsOverlay || (isDayPickerVisible && win && win.innerWidth <= MIN_SIZE_FORCE_OVERLAY);\n}\n"],"sourceRoot":"../src/"},"metadata":{},"sourceType":"module"}