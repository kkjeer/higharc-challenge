{"ast":null,"code":"import { __assign } from \"tslib\";\nimport * as React from 'react';\nimport { classNamesFunction, divProperties, memoizeFunction, getInitials, getNativeProps, getRTL, getPropsWithDefaults } from '../../../Utilities';\nimport { mergeStyles } from '../../../Styling';\nimport { PersonaPresence } from '../PersonaPresence/index';\nimport { Icon } from '../../../Icon';\nimport { Image, ImageFit, ImageLoadState } from '../../../Image';\nimport { PersonaPresence as PersonaPresenceEnum, PersonaSize } from '../Persona.types';\nimport { getPersonaInitialsColor } from '../PersonaInitialsColor';\nimport { sizeToPixels } from '../PersonaConsts';\nimport { useWarnings } from '@fluentui/react-hooks';\nvar getClassNames = classNamesFunction({\n  // There can be many PersonaCoin rendered with different sizes.\n  // Therefore setting a larger cache size.\n  cacheSize: 100\n});\nvar getInitialsStyles = memoizeFunction(function (className, initialsColor, initialsTextColor, text, primaryText, showUnknownPersonaCoin) {\n  return mergeStyles(className, !showUnknownPersonaCoin && {\n    backgroundColor: getPersonaInitialsColor({\n      text: text,\n      initialsColor: initialsColor,\n      primaryText: primaryText\n    }),\n    color: initialsTextColor\n  });\n});\nvar DEFAULT_PROPS = {\n  size: PersonaSize.size48,\n  presence: PersonaPresenceEnum.none,\n  imageAlt: ''\n};\n\nfunction useDebugWarnings(props) {\n  if (process.env.NODE_ENV !== 'production') {\n    // eslint-disable-next-line react-hooks/rules-of-hooks -- build-time conditional\n    useWarnings({\n      name: 'PersonaCoin',\n      props: props,\n      deprecations: {\n        primaryText: 'text'\n      }\n    });\n  }\n}\n\nfunction useImageLoadState(_a) {\n  var onPhotoLoadingStateChange = _a.onPhotoLoadingStateChange,\n      imageUrl = _a.imageUrl;\n\n  var _b = React.useState(ImageLoadState.notLoaded),\n      imageLoadState = _b[0],\n      setImageLoadstate = _b[1];\n\n  React.useEffect(function () {\n    setImageLoadstate(ImageLoadState.notLoaded);\n  }, [imageUrl]);\n\n  var onLoadingStateChange = function (loadState) {\n    setImageLoadstate(loadState);\n    onPhotoLoadingStateChange === null || onPhotoLoadingStateChange === void 0 ? void 0 : onPhotoLoadingStateChange(loadState);\n  };\n\n  return [imageLoadState, onLoadingStateChange];\n}\n/**\n * PersonaCoin with no default styles.\n * [Use the `getStyles` API to add your own styles.](https://github.com/microsoft/fluentui/wiki/Styling)\n */\n\n\nexport var PersonaCoinBase = React.forwardRef(function (propsWithoutDefaults, forwardedRef) {\n  var props = getPropsWithDefaults(DEFAULT_PROPS, propsWithoutDefaults);\n  useDebugWarnings(props);\n\n  var _a = useImageLoadState(props),\n      imageLoadState = _a[0],\n      onLoadingStateChange = _a[1];\n\n  var renderCoin = getCoinRenderer(onLoadingStateChange);\n  var className = props.className,\n      coinProps = props.coinProps,\n      showUnknownPersonaCoin = props.showUnknownPersonaCoin,\n      coinSize = props.coinSize,\n      styles = props.styles,\n      imageUrl = props.imageUrl,\n      initialsColor = props.initialsColor,\n      initialsTextColor = props.initialsTextColor,\n      isOutOfOffice = props.isOutOfOffice,\n      // eslint-disable-next-line deprecation/deprecation\n  _b = props.onRenderCoin,\n      // eslint-disable-next-line deprecation/deprecation\n  onRenderCoin = _b === void 0 ? renderCoin : _b,\n      // eslint-disable-next-line deprecation/deprecation\n  _c = props.onRenderPersonaCoin,\n      // eslint-disable-next-line deprecation/deprecation\n  onRenderPersonaCoin = _c === void 0 ? onRenderCoin : _c,\n      _d = props.onRenderInitials,\n      onRenderInitials = _d === void 0 ? renderPersonaCoinInitials : _d,\n      presence = props.presence,\n      presenceTitle = props.presenceTitle,\n      presenceColors = props.presenceColors,\n      // eslint-disable-next-line deprecation/deprecation\n  primaryText = props.primaryText,\n      showInitialsUntilImageLoads = props.showInitialsUntilImageLoads,\n      text = props.text,\n      theme = props.theme,\n      size = props.size;\n  var divProps = getNativeProps(props, divProperties);\n  var divCoinProps = getNativeProps(coinProps || {}, divProperties);\n  var coinSizeStyle = coinSize ? {\n    width: coinSize,\n    height: coinSize\n  } : undefined;\n  var hideImage = showUnknownPersonaCoin;\n  var personaPresenceProps = {\n    coinSize: coinSize,\n    isOutOfOffice: isOutOfOffice,\n    presence: presence,\n    presenceTitle: presenceTitle,\n    presenceColors: presenceColors,\n    size: size,\n    theme: theme\n  }; // Use getStyles from props, or fall back to getStyles from styles file.\n\n  var classNames = getClassNames(styles, {\n    theme: theme,\n    className: coinProps && coinProps.className ? coinProps.className : className,\n    size: size,\n    coinSize: coinSize,\n    showUnknownPersonaCoin: showUnknownPersonaCoin\n  });\n  var shouldRenderInitials = Boolean(imageLoadState !== ImageLoadState.loaded && (showInitialsUntilImageLoads && imageUrl || !imageUrl || imageLoadState === ImageLoadState.error || hideImage));\n  return React.createElement(\"div\", __assign({\n    role: \"presentation\"\n  }, divProps, {\n    className: classNames.coin,\n    ref: forwardedRef\n  }), // Render PersonaCoin if size is not size8. size10 and tiny need to removed after a deprecation cleanup.\n  // eslint-disable-next-line deprecation/deprecation\n  size !== PersonaSize.size8 && size !== PersonaSize.size10 && size !== PersonaSize.tiny ? React.createElement(\"div\", __assign({\n    role: \"presentation\"\n  }, divCoinProps, {\n    className: classNames.imageArea,\n    style: coinSizeStyle\n  }), shouldRenderInitials && React.createElement(\"div\", {\n    className: getInitialsStyles(classNames.initials, initialsColor, initialsTextColor, text, primaryText, showUnknownPersonaCoin),\n    style: coinSizeStyle,\n    \"aria-hidden\": \"true\"\n  }, onRenderInitials(props, renderPersonaCoinInitials)), !hideImage && onRenderPersonaCoin(props, renderCoin), React.createElement(PersonaPresence, __assign({}, personaPresenceProps))) : // Otherwise, render just PersonaPresence.\n  props.presence ? React.createElement(PersonaPresence, __assign({}, personaPresenceProps)) : // Just render Contact Icon if there isn't a Presence prop.\n  React.createElement(Icon, {\n    iconName: \"Contact\",\n    className: classNames.size10WithoutPresenceIcon\n  }), props.children);\n});\nPersonaCoinBase.displayName = 'PersonaCoinBase';\n\nvar getCoinRenderer = function (onLoadingStateChange) {\n  return function (_a) {\n    var coinSize = _a.coinSize,\n        styles = _a.styles,\n        imageUrl = _a.imageUrl,\n        imageAlt = _a.imageAlt,\n        imageShouldFadeIn = _a.imageShouldFadeIn,\n        imageShouldStartVisible = _a.imageShouldStartVisible,\n        theme = _a.theme,\n        showUnknownPersonaCoin = _a.showUnknownPersonaCoin,\n        _b = _a.size,\n        size = _b === void 0 ? DEFAULT_PROPS.size : _b; // Render the Image component only if an image URL is provided\n\n    if (!imageUrl) {\n      return null;\n    }\n\n    var classNames = getClassNames(styles, {\n      theme: theme,\n      size: size,\n      showUnknownPersonaCoin: showUnknownPersonaCoin\n    });\n    var dimension = coinSize || sizeToPixels[size];\n    return React.createElement(Image, {\n      className: classNames.image,\n      imageFit: ImageFit.cover,\n      src: imageUrl,\n      width: dimension,\n      height: dimension,\n      alt: imageAlt,\n      shouldFadeIn: imageShouldFadeIn,\n      shouldStartVisible: imageShouldStartVisible,\n      onLoadingStateChange: onLoadingStateChange\n    });\n  };\n};\n\nvar renderPersonaCoinInitials = function (_a) {\n  var imageInitials = _a.imageInitials,\n      allowPhoneInitials = _a.allowPhoneInitials,\n      showUnknownPersonaCoin = _a.showUnknownPersonaCoin,\n      text = _a.text,\n      // eslint-disable-next-line deprecation/deprecation\n  primaryText = _a.primaryText,\n      theme = _a.theme;\n\n  if (showUnknownPersonaCoin) {\n    return React.createElement(Icon, {\n      iconName: \"Help\"\n    });\n  }\n\n  var isRTL = getRTL(theme);\n  imageInitials = imageInitials || getInitials(text || primaryText || '', isRTL, allowPhoneInitials);\n  return imageInitials !== '' ? React.createElement(\"span\", null, imageInitials) : React.createElement(Icon, {\n    iconName: \"Contact\"\n  });\n};","map":{"version":3,"sources":["components/Persona/PersonaCoin/PersonaCoin.base.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport {\n  classNamesFunction,\n  divProperties,\n  memoizeFunction,\n  getInitials,\n  getNativeProps,\n  getRTL,\n  getPropsWithDefaults,\n} from '../../../Utilities';\nimport { mergeStyles } from '../../../Styling';\nimport { PersonaPresence } from '../PersonaPresence/index';\nimport { Icon } from '../../../Icon';\nimport { Image, ImageFit, ImageLoadState } from '../../../Image';\nimport { PersonaInitialsColor, PersonaPresence as PersonaPresenceEnum, PersonaSize } from '../Persona.types';\nimport { getPersonaInitialsColor } from '../PersonaInitialsColor';\nimport { sizeToPixels } from '../PersonaConsts';\nimport { useWarnings } from '@fluentui/react-hooks';\nimport type {\n  IPersonaCoinProps,\n  IPersonaCoinStyleProps,\n  IPersonaCoinStyles,\n  IPersonaPresenceProps,\n} from '../Persona.types';\n\nconst getClassNames = classNamesFunction<IPersonaCoinStyleProps, IPersonaCoinStyles>({\n  // There can be many PersonaCoin rendered with different sizes.\n  // Therefore setting a larger cache size.\n  cacheSize: 100,\n});\n\nconst getInitialsStyles = memoizeFunction(\n  (\n    className: string,\n    initialsColor: PersonaInitialsColor | string | undefined,\n    initialsTextColor: string | undefined,\n    text: string | undefined,\n    primaryText: string | undefined,\n    showUnknownPersonaCoin: boolean | undefined,\n  ) =>\n    mergeStyles(\n      className,\n      !showUnknownPersonaCoin && {\n        backgroundColor: getPersonaInitialsColor({ text, initialsColor, primaryText }),\n        color: initialsTextColor,\n      },\n    ),\n);\n\nconst DEFAULT_PROPS = {\n  size: PersonaSize.size48,\n  presence: PersonaPresenceEnum.none,\n  imageAlt: '',\n};\n\nfunction useDebugWarnings(props: IPersonaCoinProps) {\n  if (process.env.NODE_ENV !== 'production') {\n    // eslint-disable-next-line react-hooks/rules-of-hooks -- build-time conditional\n    useWarnings({\n      name: 'PersonaCoin',\n      props,\n      deprecations: { primaryText: 'text' },\n    });\n  }\n}\n\nfunction useImageLoadState({ onPhotoLoadingStateChange, imageUrl }: IPersonaCoinProps) {\n  const [imageLoadState, setImageLoadstate] = React.useState<ImageLoadState>(ImageLoadState.notLoaded);\n\n  React.useEffect(() => {\n    setImageLoadstate(ImageLoadState.notLoaded);\n  }, [imageUrl]);\n\n  const onLoadingStateChange = (loadState: ImageLoadState) => {\n    setImageLoadstate(loadState);\n\n    onPhotoLoadingStateChange?.(loadState);\n  };\n\n  return [imageLoadState, onLoadingStateChange] as const;\n}\n\n/**\n * PersonaCoin with no default styles.\n * [Use the `getStyles` API to add your own styles.](https://github.com/microsoft/fluentui/wiki/Styling)\n */\nexport const PersonaCoinBase: React.FunctionComponent<IPersonaCoinProps> = React.forwardRef<\n  HTMLDivElement,\n  IPersonaCoinProps\n>((propsWithoutDefaults, forwardedRef) => {\n  const props = getPropsWithDefaults(DEFAULT_PROPS, propsWithoutDefaults);\n\n  useDebugWarnings(props);\n\n  const [imageLoadState, onLoadingStateChange] = useImageLoadState(props);\n\n  const renderCoin = getCoinRenderer(onLoadingStateChange);\n\n  const {\n    className,\n    coinProps,\n    showUnknownPersonaCoin,\n    coinSize,\n    styles,\n    imageUrl,\n    initialsColor,\n    initialsTextColor,\n    isOutOfOffice,\n    // eslint-disable-next-line deprecation/deprecation\n    onRenderCoin = renderCoin,\n    // eslint-disable-next-line deprecation/deprecation\n    onRenderPersonaCoin = onRenderCoin,\n    onRenderInitials = renderPersonaCoinInitials,\n    presence,\n    presenceTitle,\n    presenceColors,\n    // eslint-disable-next-line deprecation/deprecation\n    primaryText,\n    showInitialsUntilImageLoads,\n    text,\n    theme,\n    size,\n  } = props;\n\n  const divProps = getNativeProps<React.HTMLAttributes<HTMLDivElement>>(props, divProperties);\n  const divCoinProps = getNativeProps<React.HTMLAttributes<HTMLDivElement>>(coinProps || {}, divProperties);\n  const coinSizeStyle = coinSize ? { width: coinSize, height: coinSize } : undefined;\n  const hideImage = showUnknownPersonaCoin;\n\n  const personaPresenceProps: IPersonaPresenceProps = {\n    coinSize,\n    isOutOfOffice,\n    presence,\n    presenceTitle,\n    presenceColors,\n    size,\n    theme,\n  };\n\n  // Use getStyles from props, or fall back to getStyles from styles file.\n  const classNames = getClassNames(styles, {\n    theme: theme!,\n    className: coinProps && coinProps.className ? coinProps.className : className,\n    size,\n    coinSize,\n    showUnknownPersonaCoin,\n  });\n\n  const shouldRenderInitials = Boolean(\n    imageLoadState !== ImageLoadState.loaded &&\n      ((showInitialsUntilImageLoads && imageUrl) || !imageUrl || imageLoadState === ImageLoadState.error || hideImage),\n  );\n\n  return (\n    <div role=\"presentation\" {...divProps} className={classNames.coin} ref={forwardedRef}>\n      {\n        // Render PersonaCoin if size is not size8. size10 and tiny need to removed after a deprecation cleanup.\n        // eslint-disable-next-line deprecation/deprecation\n        size !== PersonaSize.size8 && size !== PersonaSize.size10 && size !== PersonaSize.tiny ? (\n          <div role=\"presentation\" {...divCoinProps} className={classNames.imageArea} style={coinSizeStyle}>\n            {shouldRenderInitials && (\n              <div\n                className={getInitialsStyles(\n                  classNames.initials,\n                  initialsColor,\n                  initialsTextColor,\n                  text,\n                  primaryText,\n                  showUnknownPersonaCoin,\n                )}\n                style={coinSizeStyle}\n                aria-hidden=\"true\"\n              >\n                {onRenderInitials(props, renderPersonaCoinInitials)}\n              </div>\n            )}\n            {!hideImage && onRenderPersonaCoin(props, renderCoin)}\n            <PersonaPresence {...personaPresenceProps} />\n          </div>\n        ) : // Otherwise, render just PersonaPresence.\n        props.presence ? (\n          <PersonaPresence {...personaPresenceProps} />\n        ) : (\n          // Just render Contact Icon if there isn't a Presence prop.\n          <Icon iconName=\"Contact\" className={classNames.size10WithoutPresenceIcon} />\n        )\n      }\n      {props.children}\n    </div>\n  );\n});\nPersonaCoinBase.displayName = 'PersonaCoinBase';\n\nconst getCoinRenderer = (onLoadingStateChange: (loadState: ImageLoadState) => void) => ({\n  coinSize,\n  styles,\n  imageUrl,\n  imageAlt,\n  imageShouldFadeIn,\n  imageShouldStartVisible,\n  theme,\n  showUnknownPersonaCoin,\n  size = DEFAULT_PROPS.size,\n}: IPersonaCoinProps): JSX.Element | null => {\n  // Render the Image component only if an image URL is provided\n  if (!imageUrl) {\n    return null;\n  }\n  const classNames = getClassNames(styles, {\n    theme: theme!,\n    size,\n    showUnknownPersonaCoin,\n  });\n  const dimension = coinSize || sizeToPixels[size];\n  return (\n    <Image\n      className={classNames.image}\n      imageFit={ImageFit.cover}\n      src={imageUrl}\n      width={dimension}\n      height={dimension}\n      alt={imageAlt}\n      shouldFadeIn={imageShouldFadeIn}\n      shouldStartVisible={imageShouldStartVisible}\n      onLoadingStateChange={onLoadingStateChange}\n    />\n  );\n};\n\nconst renderPersonaCoinInitials = ({\n  imageInitials,\n  allowPhoneInitials,\n  showUnknownPersonaCoin,\n  text,\n  // eslint-disable-next-line deprecation/deprecation\n  primaryText,\n  theme,\n}: IPersonaCoinProps): JSX.Element => {\n  if (showUnknownPersonaCoin) {\n    return <Icon iconName=\"Help\" />;\n  }\n\n  const isRTL = getRTL(theme);\n\n  imageInitials = imageInitials || getInitials(text || primaryText || '', isRTL, allowPhoneInitials);\n\n  return imageInitials !== '' ? <span>{imageInitials}</span> : <Icon iconName=\"Contact\" />;\n};\n"],"sourceRoot":"../src/"},"metadata":{},"sourceType":"module"}