{"ast":null,"code":"import { __assign } from \"tslib\";\nimport * as React from 'react';\nimport { useControllableValue, useId, useWarnings } from '@fluentui/react-hooks';\nimport { classNamesFunction, getNativeProps, inputProperties, useFocusRects } from '@fluentui/utilities';\nimport { Label } from '../Label/Label';\nvar getClassNames = classNamesFunction();\nvar COMPONENT_NAME = 'Toggle';\nexport var ToggleBase = React.forwardRef(function (props, forwardedRef) {\n  var _a = props.as,\n      RootType = _a === void 0 ? 'div' : _a,\n      ariaLabel = props.ariaLabel,\n      controlledChecked = props.checked,\n      className = props.className,\n      _b = props.defaultChecked,\n      defaultChecked = _b === void 0 ? false : _b,\n      disabled = props.disabled,\n      inlineLabel = props.inlineLabel,\n      label = props.label,\n      // eslint-disable-next-line deprecation/deprecation\n  offAriaLabel = props.offAriaLabel,\n      offText = props.offText,\n      // eslint-disable-next-line deprecation/deprecation\n  onAriaLabel = props.onAriaLabel,\n      onChange = props.onChange,\n      // eslint-disable-next-line deprecation/deprecation\n  onChanged = props.onChanged,\n      onToggleClick = props.onClick,\n      onText = props.onText,\n      role = props.role,\n      styles = props.styles,\n      theme = props.theme;\n\n  var _c = useControllableValue(controlledChecked, defaultChecked, React.useCallback(function (ev, isChecked) {\n    onChange === null || onChange === void 0 ? void 0 : onChange(ev, isChecked);\n    onChanged === null || onChanged === void 0 ? void 0 : onChanged(isChecked);\n  }, [onChange, onChanged])),\n      checked = _c[0],\n      setChecked = _c[1];\n\n  var classNames = getClassNames(styles, {\n    theme: theme,\n    className: className,\n    disabled: disabled,\n    checked: checked,\n    inlineLabel: inlineLabel,\n    onOffMissing: !onText && !offText\n  });\n  var badAriaLabel = checked ? onAriaLabel : offAriaLabel;\n  var id = useId(COMPONENT_NAME, props.id);\n  var labelId = id + \"-label\";\n  var stateTextId = id + \"-stateText\";\n  var stateText = checked ? onText : offText;\n  var toggleNativeProps = getNativeProps(props, inputProperties, ['defaultChecked']); // The following properties take priority for what Narrator should read:\n  // 1. ariaLabel\n  // 2. onAriaLabel (if checked) or offAriaLabel (if not checked)\n  // 3. label, if existent\n\n  var labelledById = undefined;\n\n  if (!ariaLabel && !badAriaLabel) {\n    if (label) {\n      labelledById = labelId;\n    }\n\n    if (stateText && !labelledById) {\n      labelledById = stateTextId;\n    }\n  }\n\n  var toggleButton = React.useRef(null);\n  useFocusRects(toggleButton);\n  useComponentRef(props, checked, toggleButton);\n\n  if (process.env.NODE_ENV !== 'production') {\n    // eslint-disable-next-line react-hooks/rules-of-hooks -- build-time conditional\n    useWarnings({\n      name: COMPONENT_NAME,\n      props: props,\n      deprecations: {\n        offAriaLabel: undefined,\n        onAriaLabel: 'ariaLabel',\n        onChanged: 'onChange'\n      },\n      mutuallyExclusive: {\n        checked: 'defaultChecked'\n      }\n    });\n  }\n\n  var onClick = function (ev) {\n    if (!disabled) {\n      setChecked(!checked, ev);\n\n      if (onToggleClick) {\n        onToggleClick(ev);\n      }\n    }\n  };\n\n  var slotProps = {\n    root: {\n      className: classNames.root,\n      hidden: toggleNativeProps.hidden\n    },\n    label: {\n      children: label,\n      className: classNames.label,\n      htmlFor: id,\n      id: labelId\n    },\n    container: {\n      className: classNames.container\n    },\n    pill: __assign(__assign({}, toggleNativeProps), {\n      'aria-disabled': disabled,\n      'aria-checked': checked,\n      'aria-label': ariaLabel ? ariaLabel : badAriaLabel,\n      'aria-labelledby': labelledById,\n      className: classNames.pill,\n      'data-is-focusable': true,\n      'data-ktp-target': true,\n      disabled: disabled,\n      id: id,\n      onClick: onClick,\n      ref: toggleButton,\n      role: role ? role : 'switch',\n      type: 'button'\n    }),\n    thumb: {\n      className: classNames.thumb\n    },\n    stateText: {\n      children: stateText,\n      className: classNames.text,\n      htmlFor: id,\n      id: stateTextId\n    }\n  };\n  return React.createElement(RootType, __assign({\n    ref: forwardedRef\n  }, slotProps.root), label && React.createElement(Label, __assign({}, slotProps.label)), React.createElement(\"div\", __assign({}, slotProps.container), React.createElement(\"button\", __assign({}, slotProps.pill), React.createElement(\"span\", __assign({}, slotProps.thumb))), (checked && onText || offText) && React.createElement(Label, __assign({}, slotProps.stateText))));\n});\nToggleBase.displayName = COMPONENT_NAME + 'Base';\n\nvar useComponentRef = function (props, isChecked, toggleButtonRef) {\n  React.useImperativeHandle(props.componentRef, function () {\n    return {\n      get checked() {\n        return !!isChecked;\n      },\n\n      focus: function () {\n        if (toggleButtonRef.current) {\n          toggleButtonRef.current.focus();\n        }\n      }\n    };\n  }, [isChecked, toggleButtonRef]);\n};","map":{"version":3,"sources":["components/Toggle/Toggle.base.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport { useControllableValue, useId, useWarnings } from '@fluentui/react-hooks';\nimport { classNamesFunction, getNativeProps, inputProperties, useFocusRects } from '@fluentui/utilities';\nimport { Label } from '../Label/Label';\nimport type { IToggleProps, IToggleStyleProps, IToggleStyles, IToggle } from './Toggle.types';\n\nconst getClassNames = classNamesFunction<IToggleStyleProps, IToggleStyles>();\n\nconst COMPONENT_NAME = 'Toggle';\n\nexport const ToggleBase: React.FunctionComponent<IToggleProps> = React.forwardRef<HTMLElement, IToggleProps>(\n  (props, forwardedRef) => {\n    const {\n      as: RootType = 'div',\n      ariaLabel,\n      checked: controlledChecked,\n      className,\n      defaultChecked = false,\n      disabled,\n      inlineLabel,\n      label,\n      // eslint-disable-next-line deprecation/deprecation\n      offAriaLabel,\n      offText,\n      // eslint-disable-next-line deprecation/deprecation\n      onAriaLabel,\n      onChange,\n      // eslint-disable-next-line deprecation/deprecation\n      onChanged,\n      onClick: onToggleClick,\n      onText,\n      role,\n      styles,\n      theme,\n    } = props;\n\n    const [checked, setChecked] = useControllableValue(\n      controlledChecked,\n      defaultChecked,\n      React.useCallback(\n        (ev: React.MouseEvent<HTMLElement>, isChecked: boolean) => {\n          onChange?.(ev, isChecked);\n          onChanged?.(isChecked);\n        },\n        [onChange, onChanged],\n      ),\n    );\n\n    const classNames = getClassNames(styles!, {\n      theme: theme!,\n      className,\n      disabled,\n      checked,\n      inlineLabel,\n      onOffMissing: !onText && !offText,\n    });\n    const badAriaLabel = checked ? onAriaLabel : offAriaLabel;\n    const id = useId(COMPONENT_NAME, props.id);\n    const labelId = `${id}-label`;\n    const stateTextId = `${id}-stateText`;\n    const stateText = checked ? onText : offText;\n    const toggleNativeProps = getNativeProps<React.HTMLAttributes<HTMLButtonElement>>(props, inputProperties, [\n      'defaultChecked',\n    ]);\n\n    // The following properties take priority for what Narrator should read:\n    // 1. ariaLabel\n    // 2. onAriaLabel (if checked) or offAriaLabel (if not checked)\n    // 3. label, if existent\n\n    let labelledById: string | undefined = undefined;\n    if (!ariaLabel && !badAriaLabel) {\n      if (label) {\n        labelledById = labelId;\n      }\n      if (stateText && !labelledById) {\n        labelledById = stateTextId;\n      }\n    }\n\n    const toggleButton = React.useRef<HTMLButtonElement>(null);\n    useFocusRects(toggleButton);\n    useComponentRef(props, checked, toggleButton);\n\n    if (process.env.NODE_ENV !== 'production') {\n      // eslint-disable-next-line react-hooks/rules-of-hooks -- build-time conditional\n      useWarnings({\n        name: COMPONENT_NAME,\n        props,\n        deprecations: {\n          offAriaLabel: undefined,\n          onAriaLabel: 'ariaLabel',\n          onChanged: 'onChange',\n        },\n        mutuallyExclusive: { checked: 'defaultChecked' },\n      });\n    }\n\n    const onClick = (ev: React.MouseEvent<HTMLElement>) => {\n      if (!disabled) {\n        setChecked(!checked, ev);\n        if (onToggleClick) {\n          onToggleClick(ev);\n        }\n      }\n    };\n\n    const slotProps = {\n      root: {\n        className: classNames.root,\n        hidden: toggleNativeProps.hidden,\n      },\n      label: {\n        children: label,\n        className: classNames.label,\n        htmlFor: id,\n        id: labelId,\n      },\n      container: {\n        className: classNames.container,\n      },\n      pill: {\n        ...toggleNativeProps,\n        'aria-disabled': disabled,\n        'aria-checked': checked,\n        'aria-label': ariaLabel ? ariaLabel : badAriaLabel,\n        'aria-labelledby': labelledById,\n        className: classNames.pill,\n        'data-is-focusable': true,\n        'data-ktp-target': true,\n        disabled: disabled,\n        id: id,\n        onClick: onClick,\n        ref: toggleButton,\n        role: role ? role : 'switch',\n        type: 'button' as React.ButtonHTMLAttributes<HTMLButtonElement>['type'],\n      },\n      thumb: {\n        className: classNames.thumb,\n      },\n      stateText: {\n        children: stateText,\n        className: classNames.text,\n        htmlFor: id,\n        id: stateTextId,\n      },\n    };\n\n    return (\n      <RootType ref={forwardedRef as React.Ref<HTMLDivElement>} {...slotProps.root}>\n        {label && <Label {...slotProps.label} />}\n        <div {...slotProps.container}>\n          <button {...slotProps.pill}>\n            <span {...slotProps.thumb} />\n          </button>\n          {((checked && onText) || offText) && <Label {...slotProps.stateText} />}\n        </div>\n      </RootType>\n    );\n  },\n);\n\nToggleBase.displayName = COMPONENT_NAME + 'Base';\n\nconst useComponentRef = (\n  props: IToggleProps,\n  isChecked: boolean | undefined,\n  toggleButtonRef: React.RefObject<IToggle>,\n) => {\n  React.useImperativeHandle(\n    props.componentRef,\n    () => ({\n      get checked() {\n        return !!isChecked;\n      },\n      focus() {\n        if (toggleButtonRef.current) {\n          toggleButtonRef.current.focus();\n        }\n      },\n    }),\n    [isChecked, toggleButtonRef],\n  );\n};\n"],"sourceRoot":"../src/"},"metadata":{},"sourceType":"module"}